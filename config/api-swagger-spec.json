{"openapi":"3.0.0","paths":{"/channels":{"put":{"operationId":"Channel_createChannel","parameters":[],"requestBody":{"required":true,"description":"Channel creation payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelDto"}}}},"responses":{"200":{"description":"Channel created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelDto"}}}}},"summary":"Create a new classroom channel","tags":["Channel"]},"get":{"operationId":"Channel_getAllChannels","parameters":[],"responses":{"200":{"description":"List of channels returned successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelDto"}}}}}},"summary":"List all channels","tags":["Channel"]}},"/channels/with-permission/{userId}":{"get":{"operationId":"Channel_getAllChannelsWithPermission","parameters":[{"name":"userId","required":true,"in":"path","description":"User ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of channels returned successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelDto"}}}}}},"summary":"List channels the user can access (creator or member)","tags":["Channel"]}},"/channels/{channelId}":{"get":{"operationId":"Channel_getChannel","parameters":[{"name":"channelId","required":true,"in":"path","description":"Channel ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Channel returned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelDto"}}}}},"summary":"Get a channel by ID","tags":["Channel"]},"delete":{"operationId":"Channel_deleteChannel","parameters":[{"name":"channelId","required":true,"in":"path","description":"Channel ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Channel deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}}},"summary":"Delete a channel by ID","tags":["Channel"]}},"/channels/{channelId}/join":{"post":{"operationId":"Channel_joinChannel","parameters":[{"name":"channelId","required":true,"in":"path","description":"Channel ID to join","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Join channel payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinChannelDto"}}}},"responses":{"200":{"description":"Joined channel successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinLeaveResponseDto"}}}}},"summary":"Join a channel","tags":["Channel"]}},"/channels/{channelId}/leave":{"post":{"operationId":"Channel_leaveChannel","parameters":[{"name":"channelId","required":true,"in":"path","description":"Channel ID to leave","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Leave channel payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveChannelDto"}}}},"responses":{"200":{"description":"Left channel successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinLeaveResponseDto"}}}}},"summary":"Leave a channel","tags":["Channel"]}},"/channels/{channelId}/members":{"get":{"operationId":"Channel_getChannelMembers","parameters":[{"name":"channelId","required":true,"in":"path","description":"Channel ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of members returned successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMemberDto"}}}}}},"summary":"Get channel members","tags":["Channel"]}},"/channels/join-by-code":{"post":{"operationId":"Channel_joinChannelByCode","parameters":[],"requestBody":{"required":true,"description":"Join by code payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinByCodeDto"}}}},"responses":{"200":{"description":"Joined channel via code successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinLeaveResponseDto"}}}},"404":{"description":"Classroom with the provided code not found"}},"summary":"Join a channel by invite code","tags":["Channel"]}},"/channels/by-code/{code}":{"get":{"operationId":"Channel_getChannelByCode","parameters":[{"name":"code","required":true,"in":"path","description":"Invite code","schema":{"type":"string"}}],"responses":{"200":{"description":"Channel returned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelDto"}}}},"404":{"description":"Classroom with the provided code not found"}},"summary":"Get a channel by invite code","tags":["Channel"]}},"/users/signup":{"post":{"operationId":"User_signup","parameters":[],"requestBody":{"required":true,"description":"Signup payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupUserDto"}}}},"responses":{"200":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"summary":"Create a new user (signup)","tags":["User"]}},"/users":{"get":{"operationId":"User_getAllUsers","parameters":[],"responses":{"200":{"description":"List of users returned successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}},"summary":"List all users","tags":["User"]}},"/users/{userId}":{"get":{"operationId":"User_getUser","parameters":[{"name":"userId","required":true,"in":"path","description":"User ID","schema":{"type":"string"}}],"responses":{"200":{"description":"User returned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"summary":"Get a user by ID","tags":["User"]}},"/users/{userId}/channels":{"get":{"operationId":"User_getUserChannels","parameters":[{"name":"userId","required":true,"in":"path","description":"User ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of channels for the user returned successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserChannelDto"}}}}}},"summary":"List channels that a user has joined","tags":["User"]}},"/channels/{channelId}/types":{"get":{"operationId":"ChannelType_list","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"requesterId","required":false,"in":"query","description":"User id to evaluate visibility (owner sees all)","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}}},"summary":"List channel types for a channel","tags":["Channel Types"]},"put":{"operationId":"ChannelType_create","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelTypeDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}},"summary":"Create a new channel type (owner only)","tags":["Channel Types"]}},"/channels/{channelId}/types/{typeId}":{"get":{"operationId":"ChannelType_get","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}},{"name":"requesterId","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}},"summary":"Get a channel type","tags":["Channel Types"]},"patch":{"operationId":"ChannelType_update","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChannelTypeDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}},"summary":"Update a channel type (owner only)","tags":["Channel Types"]},"delete":{"operationId":"ChannelType_delete","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"requestedBy":{"type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessDto"}}}}},"summary":"Delete a channel type (owner only)","tags":["Channel Types"]}},"/channels/{channelId}/types/{typeId}/enable":{"post":{"operationId":"ChannelType_enable","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleChannelTypeDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}},"summary":"Enable a channel type (owner only)","tags":["Channel Types"]}},"/channels/{channelId}/types/{typeId}/disable":{"post":{"operationId":"ChannelType_disable","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleChannelTypeDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTypeDto"}}}}},"summary":"Disable a channel type (owner only)","tags":["Channel Types"]}},"/channels/{channelId}/types/{typeId}/start":{"post":{"operationId":"ChannelType_startLesson","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartQuitLessonDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessDto"}}}}},"summary":"Start a lesson for a channel type (member + visible)","tags":["Channel Types"]}},"/channels/{channelId}/types/{typeId}/quit":{"post":{"operationId":"ChannelType_quitLesson","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}},{"name":"typeId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartQuitLessonDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessDto"}}}}},"summary":"Quit a lesson for a channel type (member)","tags":["Channel Types"]}}},"info":{"title":"API","description":"","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"Bearer","bearerFormat":"Bearer","description":"Please enter token in following format: Bearer <JWT>","name":"Authorization","type":"http","in":"Header"}},"schemas":{"CreateChannelDto":{"type":"object","properties":{"name":{"type":"string","example":"Math 101"},"description":{"type":"string","example":"Algebra basics","nullable":true},"createdBy":{"type":"string","example":"user_123"}},"required":["name","createdBy"]},"ChannelMemberDto":{"type":"object","properties":{"userId":{"type":"string","example":"user_123"},"peerId":{"type":"string","example":"peer-connection-id"},"joinedAt":{"type":"string","example":"2025-01-01T12:00:00.000Z"}},"required":["userId","peerId","joinedAt"]},"ChannelDto":{"type":"object","properties":{"id":{"type":"string","example":"8f14e45f-ea9a-4b0a-9b7d-1234567890ab"},"name":{"type":"string","example":"Math 101"},"description":{"type":"string","example":"Algebra basics","nullable":true},"createdBy":{"type":"string","example":"user_123"},"createdAt":{"type":"string","example":"2025-01-01T12:00:00.000Z"},"members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMemberDto"}},"code":{"type":"string","example":"123456"}},"required":["id","name","createdBy","createdAt","members","code"]},"JoinChannelDto":{"type":"object","properties":{"userId":{"type":"string","example":"user_123"},"peerId":{"type":"string","example":"peer-connection-id"}},"required":["userId","peerId"]},"JoinLeaveResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true},"channel":{"$ref":"#/components/schemas/ChannelDto"}},"required":["success","channel"]},"LeaveChannelDto":{"type":"object","properties":{"userId":{"type":"string","example":"user_123"}},"required":["userId"]},"JoinByCodeDto":{"type":"object","properties":{"code":{"type":"string","example":"ABC123"},"userId":{"type":"string","example":"user_123"},"peerId":{"type":"string","example":"peer-connection-id"}},"required":["code","userId","peerId"]},"SuccessResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true}},"required":["success"]},"SignupUserDto":{"type":"object","properties":{"username":{"type":"string","example":"jdoe"},"email":{"type":"string","example":"jdoe@example.com","nullable":true},"displayName":{"type":"string","example":"John Doe","nullable":true}},"required":["username"]},"UserDto":{"type":"object","properties":{"id":{"type":"string","example":"8f14e45f-ea9a-4b0a-9b7d-1234567890ab"},"username":{"type":"string","example":"jdoe"},"email":{"type":"string","example":"jdoe@example.com","nullable":true},"displayName":{"type":"string","example":"John Doe"},"createdAt":{"type":"string","example":"2025-01-01T12:00:00.000Z"}},"required":["id","username","displayName","createdAt"]},"UserChannelDto":{"type":"object","properties":{"id":{"type":"string","example":"8f14e45f-ea9a-4b0a-9b7d-1234567890ab"},"name":{"type":"string","example":"Math 101"},"description":{"type":"string","example":"Algebra basics","nullable":true},"createdBy":{"type":"string","example":"user_123"},"createdAt":{"type":"string","example":"2025-01-01T12:00:00.000Z"},"members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMemberDto"}},"code":{"type":"string","example":"123456"}},"required":["id","name","createdBy","createdAt","members","code"]},"ChannelTypeDto":{"type":"object","properties":{"id":{"type":"string","example":"f82b0a0d-0d6a-4b63-8b15-1a6e4f1e6f8f"},"name":{"type":"string","example":"Lecture"},"description":{"type":"string","example":"Live instructor-led session","nullable":true},"enabled":{"type":"boolean","example":true},"createdBy":{"type":"string","example":"user_123"},"createdAt":{"type":"string","example":"2025-01-01T12:00:00.000Z"},"updatedAt":{"type":"string","example":"2025-01-01T12:30:00.000Z"},"channelId":{"type":"string","example":"8f14e45f-ea9a-4b0a-9b7d-1234567890ab"}},"required":["id","name","enabled","createdBy","createdAt","updatedAt","channelId"]},"CreateChannelTypeDto":{"type":"object","properties":{"name":{"type":"string","example":"Lecture"},"description":{"type":"string","example":"Live instructor-led session","nullable":true},"createdBy":{"type":"string","example":"user_123"}},"required":["name","createdBy"]},"UpdateChannelTypeDto":{"type":"object","properties":{"name":{"type":"string","example":"Workshop"},"description":{"type":"string","example":"Hands-on session","nullable":true}}},"ToggleChannelTypeDto":{"type":"object","properties":{"enabled":{"type":"boolean","example":true},"requestedBy":{"type":"string","example":"user_123"}},"required":["enabled","requestedBy"]},"SuccessDto":{"type":"object","properties":{"success":{"type":"boolean","example":true}},"required":["success"]},"StartQuitLessonDto":{"type":"object","properties":{"userId":{"type":"string","example":"user_456"}},"required":["userId"]}}}}